{% extends "layouts/base.html" %}
{% block content %}

<h1>Clientes</h1>
<!-- ====================== MODAL DE CONFIRMACIÓN DE ELIMINACIÓN ====================== -->
<div id="modalEliminar" class="modal hidden">
  <div class="modal__backdrop"></div>
  <div class="modal__card">
    <button class="modal-close" id="closeEliminarModal">✖</button>

    <h2 id="invModalTitle">¿Seguro que deseas eliminar este cliente?</h2>

    <p id="modalMsg" class="hint">Esta acción no se puede deshacer.</p>

    <div class="inline mt-2" style="gap:8px;">
      <button id="cancelEliminar" class="secondary">Cancelar</button>
      <button id="confirmEliminar" class="danger">Eliminar</button>
    </div>
  </div>
</div>


<!-- ====================== MODAL DE AGREGAR CLIENTE ====================== -->
<div id="modalCliente" class="modal hidden">
  <div class="modal__backdrop"></div>
  <div class="modal__card">
    <button class="modal-close" id="closeClienteModal">✖</button>
    <h2 id="invModalTitle">Agregar/Editar Cliente</h2>
    <form id="clienteForm" autocomplete="off">
      <input type="hidden" name="id">

      <div class="row-3">
        <div>
          <label for="cNombre">Nombre</label>
          <input id="cNombre" type="text" name="nombre" required>
        </div>

        <div>
          <label for="cTelefono">Teléfono</label>
          <input id="cTelefono" type="text" name="telefono" required>
        </div>

        <div>
          <label for="cEmail">Email</label>
          <input id="cEmail" type="email" name="email" required>
        </div>
      </div>

      <p id="formMsg" class="mt-1 subtle"></p>

      <div class="inline mt-2" style="gap:8px;">
        <button type="submit">Guardar</button>
        <button type="button" class="secondary" id="cancelCliente">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- ====================== LISTADO DE CLIENTES ====================== -->
<section class="card">
  <header class="menu-toolbar">
    <input type="text" id="buscar" placeholder="Buscar por nombre/teléfono/email">
    <div class="cliente-btns">
      <button id="btnBuscar" class="secondary">Buscar</button>
      <button id="btnLimpiar" class="ghost">Limpiar</button>
      <button id="btnNuevoCliente" class="primary">Nuevo Cliente</button>
    </div>
  </header>

  <div class="table-responsive mt-1">
    <table id="tabla" class="stack">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Teléfono</th>
          <th>Email</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <!-- Rellenado por clientes.js -->
      </tbody>
    </table>
  </div>

  <p id="tablaMsg" class="mt-1 subtle"></p>
</section>

<script src="{{ url_for('static', filename='js/clientes.js') }}"></script>

{% endblock %}
